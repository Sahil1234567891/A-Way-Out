#include <stdio.h>
#include <stdlib.h>

// Define the structure for a binary tree node
typedef struct TreeNode {
    char* clue;
    struct TreeNode* left;
    struct TreeNode* right;
} TreeNode;

// Function to create a new binary tree node
TreeNode* createNode(char* clue) {
    TreeNode* newNode = (TreeNode*)malloc(sizeof(TreeNode));
    if (newNode == NULL) {
        printf("Memory allocation failed.\n");
        exit(1);
    }
    newNode->clue = clue;
    newNode->left = newNode->right = NULL;
    return newNode;
}

// Function to build a binary tree representing the game map with clues
TreeNode* buildGameMap() {
    TreeNode* root = createNode("Start");
    root->left = createNode("Take the left path.");
    root->right = createNode("Take the right path.");
    root->left->left = createNode("Turn left again.");
    root->left->right = createNode("Go right from here.");
    root->right->left = createNode("Take the left path.");
    root->right->right = createNode("Go right to win!");
    root->left->left->left = createNode("You are on the right path.");
    root->left->left->right = createNode("You are on the wrong path.");
    root->left->right->left = createNode("You are on the right path.");
    root->left->right->right = createNode("You are on the wrong path.");
    root->right->left->left = createNode("You are on the right path.");
    root->right->left->right = createNode("You are on the wrong path.");
    root->right->right->left = createNode("You are on the wrong path.");
    root->right->right->right = createNode("Congratulations! You've won!");
    return root;
}

// Function to play the game and find the winning path
int playGame(TreeNode* currentNode) {
    printf("Current clue: %s\n", currentNode->clue);

    if (strcmp(currentNode->clue, "Congratulations! You've won!") == 0) {
        printf("You've reached the win condition.\n");
        return 1; // You won!
    }

    char choice;
    printf("Choose the next move (L for left, R for right): ");
    scanf(" %c", &choice);

    if (choice == 'L' || choice == 'l') {
        if (currentNode->left != NULL) {
            return playGame(currentNode->left);
        }
    } else if (choice == 'R' || choice == 'r') {
        if (currentNode->right != NULL) {
            return playGame(currentNode->right);
        }
    }

    printf("Invalid move. Try again.\n");
    return 0;
}

int main() {
    TreeNode* root = buildGameMap();
    printf("Welcome to the game!\n");
    int result = playGame(root);
    if (result == 0) {
        printf("Game over. You didn't find the winning path.\n");
    }
    return 0;
}
