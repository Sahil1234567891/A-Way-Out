#include<stdio.h>
#include<stdlib.h>

typedef struct map {
    char *clue;
    struct map* left;
    struct map* right;
} map;

map *add(char *clue) {
    map* branch = (map*)malloc(sizeof(map));
    if (branch == NULL) {
        printf("fail\n");
        exit(1);
    }
    branch->clue = clue;
    branch->left = branch->right = NULL;
    return branch;
}

map* construct() {
    map* root = add("1:there are two routs in front of you,you see light coming from left and hear some voice from right");
    root->left = add("2:");
    root->right = add("3:hi");
    root->left->left = add("4:hi");
    root->left->right = add("5:hi");
    root->right->left = add("6:hi");
    root->right->right = add("7:hi");
    root->left->left->left = add("8:hi");
    root->left->left->right = add("9:hi");
    root->left->right->left = add("10:hi");
    root->left->right->right = add("11:hi");
    root->right->left->left = add("12:hi");
    root->right->left->right = add("13:hi");
    root->right->right->left = add("14:hi");
    root->right->right->right = add("15:hi");
    return root;
}
void goleft(map* player){
    if (player->left != NULL) {
        return playmove(player->left);
    }
}
void goright(map* player){
    if (player->right != NULL) {
        return playmove(player->right);
    }
}
void goback(map* player,int back){
    if (back<20){
        back++;

    }
    else
        printf("you have used up all you back moves recklessly!! NOW SUFFEER(either continue or restart)" );
}

void playmove(char move,int back,map* player){
    if (move=='a'){
        goleft(player);
    }
    if (move=='d'){
        goright(player);
    }
    if (move=='s'){
        goback(player,back);
    }

}
void script(){
    printf("\n\n*You wake up in an unfamiliar and unsettling environment, disoriented and alarmed.* \n\nYou:(panicked) What's going on? Who are you, and where am I? \n\n???: (chuckles) You won't get any answers from me, my dear subject. But don't worry, you'll have the opportunity to experience my groundbreaking experiments firsthand. \n\nYou: (desperate) This can't be happening! Let me out of here, please! I haven't done anything to deserve this!\n\n*You desperately look around, trying to find any possible means of escape.* \n\nYou: (determined) I won't let you do this to me! There has to be a way out of here!\n\n???: (mocking) Determination, I see. Very well, you can try to find a way out. But be warned, my dear subject, you're not alone in this maze.\n\n*As you start exploring your surroundings, you notice a door in the far corner of the room.*\n\nYou: (whispering to yourself) Maybe that door leads to my escape.\n\n*You cautiously approach the door, and to your surprise, it creaks open. Stepping through, you find yourself in a dimly lit corridor. The walls are covered in strange symbols, and you can hear faint, eerie noises in the distance.*\n\nYou: (whispering) What is this place?\n\n*You continue down the corridor, and it eventually leads to a junction. To your left, there's another door, while to your right, you see a long, twisting corridor.*\n\nYou: (thinking) Which way should I go?\n\n*Not knowing what awaits you, you decide to go through the door to your left. As you open it, you find yourself in a small, circular room with multiple doors, each labeled with different symbols.*\n\nYou: (confused) Now what? Which door should I choose?");
    printf("\n\n\n\n\nGame Rules:\n 1) you can only go left or right\n 2) you are allowed to move backwards only 20 times\n 3) you must find a way out of this maze,\n 4) you can know your location only 5 times\n");
}
int main(){
    int back=0;
    char name[100],move;
    printf("enter your name\n");
    scanf("%s",name);
    map* root= construct();
    script();
    printf("enter your move\n");
    scanf("%c",&move);
    playmove(move,back,root);

}
